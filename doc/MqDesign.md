##Message Queue Design

					   Index MappedFile
		   +------------------------------------------------+
		   | Version                                       4|
		   +------------------------------------------------+
		   | BlockCount(n)                                 4|
		   +------------------------------------------------+
		   | BlockStart                                    8| -----+
		   +------------------------------------------------+      |
		   | Flag                                          4|      |
		   +------------------------------------------------+      |
		   | MessageCount                                  8|      |
		   +------------------------------------------------+      |
		   |               Extension                 to 1024|      |
		   +------------------------------------------------+      |
	       |0_baseOffset | endOffset | createdTs | updatedTs|<-----+
	       +------------------------------------------------+
	  +--->|1_baseOffset | endOffset | createdTs | updatedTs|        BlockFile 00000000000000000000.zbus
	  |    +------------------------------------------------+      +------->+---------------+                   DiskMessage Format
	  |    |                    ...                         |      |        | DiskMessage_0 |                   +---------------+
	  |    +------------------------------------------------+      |        | DiskMessage_1 |                   | Offset       8|
	  |    |n_baseOffset | endOffset | createdTs | updatedTs|      |        | DiskMessage_2 |<---+              +---------------+
	  |    +------------------------------------------------+      |        |       .       |    |              | Timestamp    8|
	  |           |            | writing_position                  |        |       .       |    |              +---------------+
	  |           +----------- | ----------------------------------+        |       .       |    |              | Id          40|
	  |                        |                                            | DiskMessage_n |    |              +---------------+
	  |                        +------------------------------------------->+---------------+    |              | CorrOffset   8|
	  |                                                                                          |              +---------------+
	  |                                                                                          |              | MessageCount 8|
	  |   QueueReader1 MappedFile                                                                |              +---------------+
	  |     +---------------+                                                                    |              | Tag        128|
	  +-----| BlockNumber  8|                                                                    |              +---------------+
	        +---------------+                                                                    |              | Len          4|
	        | Offset       4|--------------------------------------------------------------------+              +---------------+
	        +---------------+                                                                                   | Body         ?|
	        | Tag        128|                                                                                   +---------------+
	        +---------------+
	  ^
      |   QueueReader2 MappedFile                                                                ^
      |     +---------------+                                                                    |
      +-----| BlockNumber  8|                                                                    |
            +---------------+                                                                    |
            | Offset       4|--------------------------------------------------------------------+
            +---------------+
            | Tag        128|
            +---------------+